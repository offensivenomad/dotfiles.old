!function(t,e){const i="object"==typeof exports?exports:"object"==typeof t?t:{};!function(t){const e=Symbol("newer"),i=Symbol("older");function s(t,e){"number"!=typeof t&&(e=t,t=0),this.size=0,this.limit=t,this.oldest=this.newest=void 0,this._keymap=new Map,e&&(this.assign(e),t<1&&(this.limit=this.size))}function o(t,s){this.key=t,this.value=s,this[e]=void 0,this[i]=void 0}function n(t){this.entry=t}function r(t){this.entry=t}function h(t){this.entry=t}t.LRUMap=s,s.prototype._markEntryAsUsed=function(t){t!==this.newest&&(t[e]&&(t===this.oldest&&(this.oldest=t[e]),t[e][i]=t[i]),t[i]&&(t[i][e]=t[e]),t[e]=void 0,t[i]=this.newest,this.newest&&(this.newest[e]=t),this.newest=t)},s.prototype.assign=function(t){let s,n=this.limit||Number.MAX_VALUE;this._keymap.clear();let r=t[Symbol.iterator]();for(let t=r.next();!t.done;t=r.next()){let r=new o(t.value[0],t.value[1]);if(this._keymap.set(r.key,r),s?(s[e]=r,r[i]=s):this.oldest=r,s=r,0==n--)throw new Error("overflow")}this.newest=s,this.size=this._keymap.size},s.prototype.get=function(t){var e=this._keymap.get(t);if(e)return this._markEntryAsUsed(e),e.value},s.prototype.set=function(t,s){var n=this._keymap.get(t);return n?(n.value=s,this._markEntryAsUsed(n),this):(this._keymap.set(t,n=new o(t,s)),this.newest?(this.newest[e]=n,n[i]=this.newest):this.oldest=n,this.newest=n,++this.size,this.size>this.limit&&this.shift(),this)},s.prototype.shift=function(){var t=this.oldest;if(t)return this.oldest[e]?(this.oldest=this.oldest[e],this.oldest[i]=void 0):(this.oldest=void 0,this.newest=void 0),t[e]=t[i]=void 0,this._keymap.delete(t.key),--this.size,[t.key,t.value]},s.prototype.find=function(t){let e=this._keymap.get(t);return e?e.value:void 0},s.prototype.has=function(t){return this._keymap.has(t)},s.prototype.delete=function(t){var s=this._keymap.get(t);if(s)return this._keymap.delete(s.key),s[e]&&s[i]?(s[i][e]=s[e],s[e][i]=s[i]):s[e]?(s[e][i]=void 0,this.oldest=s[e]):s[i]?(s[i][e]=void 0,this.newest=s[i]):this.oldest=this.newest=void 0,this.size--,s.value},s.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},n.prototype[Symbol.iterator]=function(){return this},n.prototype.next=function(){let t=this.entry;return t?(this.entry=t[e],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}},r.prototype[Symbol.iterator]=function(){return this},r.prototype.next=function(){let t=this.entry;return t?(this.entry=t[e],{done:!1,value:t.key}):{done:!0,value:void 0}},h.prototype[Symbol.iterator]=function(){return this},h.prototype.next=function(){let t=this.entry;return t?(this.entry=t[e],{done:!1,value:t.value}):{done:!0,value:void 0}},s.prototype.keys=function(){return new r(this.oldest)},s.prototype.values=function(){return new h(this.oldest)},s.prototype.entries=function(){return this},s.prototype[Symbol.iterator]=function(){return new n(this.oldest)},s.prototype.forEach=function(t,i){"object"!=typeof i&&(i=this);let s=this.oldest;for(;s;)t.call(i,s.value,s.key,this),s=s[e]},s.prototype.toJSON=function(){for(var t=new Array(this.size),i=0,s=this.oldest;s;)t[i++]={key:s.key,value:s.value},s=s[e];return t},s.prototype.toString=function(){for(var t="",i=this.oldest;i;)t+=String(i.key)+":"+i.value,(i=i[e])&&(t+=" < ");return t}}(i),"function"==typeof define&&define.amd&&define("lru",i)}(this);