!function(e){function t(t){for(var r,s,u=t[0],o=t[1],i=t[2],f=0,l=[];f<u.length;f++)s=u[f],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&l.push(a[s][0]),a[s]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);for(p&&p(t);l.length;)l.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,u=1;u<n.length;u++){var o=n[u];0!==a[o]&&(r=!1)}r&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={0:0},c=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var u=window.webpackJsonp=window.webpackJsonp||[],o=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var p=o;c.push([161,1]),n()}({157:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="http://pericles.alexandrucalin.me/installed?v="},161:function(e,t,n){n(162),e.exports=n(347)},24:function(e,t,n){"use strict";var r,a,c,s,u,o,i,p,f,l,d,b=n(159),h=n(0),v=n.n(h),O=n(2),S=n(5),T=n(3),x=function(e){var t=Object.assign({type:T.d.ACTION.UPDATE},e);S.a.dispatch(t)},y=n(63),w=window.speechSynthesis,m=function(){var e=Object(O.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(O.a)(v.a.mark((function e(n,r){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getVoices();case 2:a=e.sent,n(a[t]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E={msg:new SpeechSynthesisUtterance,lang:"en-GB",charIndex:0,oldCharIndex:0,playingTabHasClosed:(d=Object(O.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=S.a.getState(),t!==n.player.playingTabId){e.next=5;break}return e.next=5,E.reset();case 5:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)}),demandKey:(l=Object(O.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x({status:T.d.STATUS.IS_READY,currentSection:t}),w.cancel(),setTimeout(Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.demand();case 2:case"end":return e.stop()}}),e)}))),100);case 3:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)}),demand:(f=Object(O.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.a.getState(),n=Object(b.a)(t.player.sections).slice(t.player.currentSection),E.play(),e.next=6,E.read(n,Object(O.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x({status:T.d.STATUS.IS_READY}),e.next=4,Object(y.b)("webParserType");case 4:if("googleDoc"!==(t=e.sent).response&&"viewerDoc"!==t.response){e.next=14;break}return e.next=9,Object(y.b)("scrollToAdjacentPage");case 9:if("next"!==e.sent.response){e.next=14;break}return e.next=14,E.start();case 14:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)}),readNextSentence:(p=Object(O.a)(v.a.mark((function e(t,n){var r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S.a.getState(),!(a=t.slice(1)).length||r.player.status===T.d.STATUS.IS_STOPPED){e.next=9;break}return x({currentSection:r.player.currentSection+1}),e.next=7,E.read(a,n);case 7:e.next=10;break;case 9:n&&n();case 10:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)}),read:(i=Object(O.a)(v.a.mark((function e(t,n){var r,a,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S.a.getState(),E.charIndex=0,E.oldCharIndex=0,!t.length&&n&&n(),(a=t[0])&&a.text||E.readNextSentence(t,n),r.player.status!==T.d.STATUS.IS_STOPPED){e.next=9;break}return n&&n(),e.abrupt("return");case 9:return E.msg=new SpeechSynthesisUtterance,E.msg.lang=E.lang,c=r.player.settings.voice,e.next=14,m(c);case 14:(s=e.sent)&&(E.msg.voice=s),E.msg.text=a.text,E.msg.volume=r.player.settings.volume,E.msg.pitch=r.player.settings.pitch,E.msg.rate=r.player.settings.rate,w.speak(E.msg),E.msg.onmark=function(e){},E.msg.onword=function(e){e.charIndex===E.oldCharIndex&&0!==e.charIndex||E.charIndex++,E.oldCharIndex=e.charIndex},E.msg.onboundary=function(e){e.charIndex===E.oldCharIndex&&0!==e.charIndex||E.charIndex++,E.oldCharIndex=e.charIndex},E.msg.onend=Object(O.a)(v.a.mark((function e(){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S.a.getState(),![T.d.STATUS.IS_READY,T.d.STATUS.IS_STOPPED].includes(r.player.status)){e.next=3;break}return e.abrupt("return");case 3:E.readNextSentence(t,n);case 4:case"end":return e.stop()}}),e)}))),E.msg.onstart=function(){var e=Object(O.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E.msg.onerror=function(e){};case 27:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)}),reset:(o=Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.stop(),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){var t;t=[],S.a.dispatch({type:T.c.ACTION.SET_SECTIONS,value:t}),e(!0)}),100)})));case 2:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)}),start:(u=Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.stop(),e.abrupt("return",new Promise((function(e,t){setTimeout(Object(O.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.reset();case 2:return t.next=4,Object(y.b)("getSections");case 4:e();case 5:case"end":return t.stop()}}),t)}))),500)})));case 2:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),play:function(){w.cancel(),x({status:T.d.STATUS.IS_PLAYING})},replay:(s=Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x({status:T.d.STATUS.IS_READY}),w.cancel(),setTimeout(Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.demand();case 2:case"end":return e.stop()}}),e)}))),100);case 3:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)}),prev:(c=Object(O.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=S.a.getState(),x({status:T.d.STATUS.IS_READY,currentSection:t.player.currentSection>0?t.player.currentSection-1:t.player.currentSection}),w.cancel(),setTimeout(Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.demand();case 2:case"end":return e.stop()}}),e)}))),100);case 5:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)}),next:(a=Object(O.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=S.a.getState(),n=t.player.currentSection<t.player.sections.length-1?t.player.currentSection+1:t.player.currentSection,x({status:T.d.STATUS.IS_READY,currentSection:n}),w.cancel(),setTimeout(Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.demand();case 2:case"end":return e.stop()}}),e)}))),100);case 6:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),stop:function(){x({status:T.d.STATUS.IS_STOPPED,currentSection:0,playingTabId:0}),w.cancel()},halt:(r=Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x({status:T.d.STATUS.IS_READY,currentSection:0}),w.cancel();case 2:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),pause:function(){x({status:T.d.STATUS.IS_PAUSED}),w.pause()},resume:function(){x({status:T.d.STATUS.IS_PLAYING}),w.resume()}};t.a=E},28:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return u}));var r=.28,a=.4,c="UA-25965793-6",s="",u="undefined"!=typeof InstallTrigger},3:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return u}));var r={ACTION:{UPDATE:"APP::UPDATE"}},a={STATUS:{IS_STOPPED:0,IS_LOADING:1,IS_READY:2,IS_PLAYING:3,IS_PAUSED:4,IS_ERROR:5},ACTION:{LOADING:"PLAYER::LOADING",ERROR:"PLAYER::ERROR",UPDATE:"PLAYER::UPDATE",TAB_ID:"PLAYER::TAB_ID",SET_VOICES:"PLAYER::SET_VOICES"},EPIC:{PREV:"PLAYER::PREV",NEXT:"PLAYER::NEXT",PLAY:"PLAYER::PLAY",STOP:"PLAYER::STOP",HALT:"PLAYER::HALT",PAUSE:"PLAYER::PAUSE",RESUME:"PLAYER::RESUME"}},c={ACTION:{SKIP_ANIMATE:"CONTENT::SKIP_ANIMATE"}},s={ACTION:{UPDATE:"SETTINGS::UPDATE",OTHER_UPDATE:"SETTINGS::OTHER_UPDATE",HOTKEY_FOCUS:"SETTINGS::HOTKEY_FOCUS",SET_HOTKEYS:"SETTINGS::SET_HOTKEYS"}},u={ACTION:{SET_SECTIONS:"PARSER::SET_SECTIONS",GET_SECTIONS:"PARSER::GET_SECTIONS"}}},347:function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),r=n.n(t),a=n(2),c=n(5),s=n(24),u=n(35),o=n(36),i=n(3),p=n(25),f=n(63),l=n(83),d=n(157),b=n(43),h=n(158),v=n(28),O=Object(l.a)(),S={},T=[];Object(l.b)(),S.utter=function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim().length){e.next=2;break}return e.abrupt("return");case 2:if(n=Object(h.a)(t).sentences().data()){e.next=5;break}return e.abrupt("return");case 5:return c.a.dispatch({type:i.c.ACTION.SET_SECTIONS,value:n}),e.next=8,s.a.demandKey(0);case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S.stop=function(){s.a.stop()},S.tabClosed=function(e){c.a.getState().player.playingTabId===e&&S.stop()},O.runtime.onMessage.addListener(function(){var e=Object(a.a)(r.a.mark((function e(t,n,a){var c,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.type||"event"!==t.type){e.next=5;break}Object(l.b)({category:t.data||"",action:t.action||"clicked",label:t.url||""}),e.next=20;break;case 5:if(!t.message){e.next=20;break}return e.prev=6,s=S[t.message],u=t.params,"tabClosed"===t.message&&(u=n.tab.id),e.next=12,s.call(null,u);case 12:c=e.sent,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),c="error";case 19:a(c);case 20:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t,n,r){return e.apply(this,arguments)}}()),O.runtime.onInstalled.addListener(function(){var e=Object(a.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||"install"!==t.reason){e.next=9;break}return n=O.runtime.getManifest().version,e.next=5,O.tabs.create({url:d.a+n,active:!0});case 5:if(!(a=e.sent)){e.next=9;break}return e.next=9,window.update(a.windowId,{focused:!0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O.contextMenus.create({id:"pericles-utter",title:"Speak.. ",contexts:["selection"]}),O.contextMenus.create({id:"pericles-stop",title:"Stop!",contexts:["selection"]}),O.contextMenus.onClicked.addListener(function(){var e=Object(a.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pericles-utter"!==t.menuItemId){e.next=11;break}if(!(a=t.selectionText||"").length){e.next=8;break}return e.next=6,S.utter(a);case 6:e.next=9;break;case 8:case 9:e.next=14;break;case 11:if("pericles-stop"!==t.menuItemId){e.next=14;break}return e.next=14,S.stop();case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());O.runtime.setUninstallURL("https://pericles.alexandrucalin.me/extension-uninstall?domain=&utm_medium=internal&utm_campaign=extensionUninstall");var x=function(){var e=Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.a.getState(),e.next=3,Object(f.a)();case 3:if(n=e.sent,0===t.player.playingTabId||t.player.playingTabId===n){e.next=10;break}return e.next=8,s.a.reset();case 8:e.next=17;break;case 10:if(t.player.status!==i.d.STATUS.IS_PAUSED){e.next=15;break}s.a.resume(),e.next=17;break;case 15:return e.next=17,s.a.demand();case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.next();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.prev();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){s.a.stop()},E=function(){s.a.halt()},I=function(){s.a.pause()},k=function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.set(t.key,JSON.stringify(t.hotkeys));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.a.getState(),["volume","pitch","rate","voice"].forEach(function(){var e=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object.keys(t).includes(n)){e.next=3;break}return e.next=3,b.a.set(n,t[n]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.player.status!==i.d.STATUS.IS_PLAYING){e.next=6;break}return e.next=6,s.a.replay();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(["voice"],i.e.ACTION.UPDATE);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:["autoscroll","disableHotkeys","highlightColor"].forEach(function(){var e=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object.keys(t).includes(n)){e.next=3;break}return e.next=3,b.a.set(n,t[n]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();c.b.run((function(e){return e.pipe(Object(p.a)(i.d.EPIC.PLAY),Object(u.a)(x),Object(o.a)())})),c.b.run((function(e){return e.pipe(Object(p.a)(i.d.EPIC.STOP),Object(u.a)(m),Object(o.a)())})),c.b.run((function(e){return e.pipe(Object(p.a)(i.d.EPIC.HALT),Object(u.a)(E),Object(o.a)())})),c.b.run((function(e){return e.pipe(Object(p.a)(i.d.EPIC.PAUSE),Object(u.a)(I),Object(o.a)())})),c.b.run((function(e){return e.pipe(Object(p.a)(i.d.EPIC.NEXT),Object(u.a)(y),Object(o.a)())})),c.b.run((function(e){return e.pipe(Object(p.a)(i.d.EPIC.PREV),Object(u.a)(w),Object(o.a)())})),c.b.run((function(e){return e.pipe(Object(p.a)(i.e.ACTION.UPDATE),Object(u.a)(A),Object(o.a)())})),c.b.run((function(e){return e.pipe(Object(p.a)(i.e.ACTION.SET_HOTKEYS),Object(u.a)(k),Object(o.a)())})),c.b.run((function(e){return e.pipe(Object(p.a)(i.e.ACTION.OTHER_UPDATE),Object(u.a)(j),Object(o.a)())})),c.b.run((function(e){return e.pipe(Object(p.a)(i.d.ACTION.SET_VOICES),Object(u.a)(g),Object(o.a)())})),c.a.subscribe((function(){c.a.getState()}));var P=function(e){var t=-1;return["google us english","english"].forEach((function(n){-1===t&&(t=e.findIndex((function(e){return-1!==e.text.toLocaleLowerCase().indexOf(n)})))})),-1===t&&(t=0),t},C=function(e,t){var n=c.a.getState();e.forEach(function(){var e=Object(a.a)(r.a.mark((function e(a){var s,u,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(a);case 2:if(void 0===(s=e.sent)){e.next=9;break}(u={type:t})[a]=s,c.a.dispatch(u),e.next=16;break;case 9:if("voice"!==a){e.next=14;break}o=P(n.player.voices),c.a.dispatch({type:i.e.ACTION.UPDATE,voice:o}),e.next=16;break;case 14:return e.next=16,b.a.set(a,n[a]);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},N=function(e){var t,n,r=[],a="";T=e.map((function(e,c){(a=(e.voiceName||e.name).replace(/\((.*)\)/,"").trim().split(/\s+/)).length>1&&!v.e&&(t=a[0],-1===(n=r.indexOf(t))&&(r.push(t),n=r.length-1));var s={id:c,lang:e.lang,countryCode:e.lang,text:e.voiceName||e.name,groupName:r[n]};return new RegExp("[a-z]{2}-[a-z]{2}","i").test(e.lang)?s.countryCode=e.lang.slice(3).toLocaleUpperCase():s.countryCode=e.lang.toLocaleUpperCase(),s.shortTitle=s.text,s.text.split(/\s+/).length>1&&!v.e&&(s.shortTitle=s.text.split(/\s+/).splice(1).join(" ")),s})),c.a.dispatch({type:i.d.ACTION.SET_VOICES,value:T})},_=function(){if(O.tts)O.tts.getVoices(function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());else{var e=speechSynthesis.getVoices();N(e)}};_(),speechSynthesis.onvoiceschanged=_,C(["volume","pitch","rate"],i.e.ACTION.UPDATE),C(["autoscroll","disableHotkeys","highlightColor"],i.e.ACTION.OTHER_UPDATE),["play","stop","next","prev"].forEach(function(){var e=Object(a.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.a.getState(),e.next=3,b.a.get(t);case 3:if(void 0===(a=e.sent)){e.next=8;break}c.a.dispatch({type:i.e.ACTION.SET_HOTKEYS,key:t,hotkeys:JSON.parse(a)}),e.next=10;break;case 8:return e.next=10,b.a.set(t,JSON.stringify(n.hotkeys[t]));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}.call(this,n(80))},43:function(e,t,n){"use strict";var r,a,c=n(0),s=n.n(c),u=n(2),o=(chrome||browser).storage.local,i={get:(a=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(u.a)(s.a.mark((function e(n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.get(t,function(){var e=Object(u.a)(s.a.mark((function e(r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(r[t]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),set:(r=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(u.a)(s.a.mark((function e(r,a){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c={})[t]=n,e.next=4,o.set(c);case 4:r(c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})};t.a=i},5:function(e,t,n){"use strict";var r=n(357),a=n(154),c=n(155),s=n(112),u=n(3),o={showSettings:!1,hotkeyFocus:"",hotkeys:{play:[{which:75,key:"k",code:"keyK"}],next:[{which:78,key:"n",code:"keyN"}],prev:[{which:80,key:"p",code:"keyP"}],stop:[{which:74,key:"j",code:"keyJ"}]},player:{settings:{volume:.9,pitch:1,rate:1,voice:1},sections:[],currentSection:0,status:0,voices:["loading voices.."],playingTabId:0},autoscroll:!0,disableHotkeys:!1,highlightColor:"fffc02",skipAnimate:!1},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0,n=JSON.parse(JSON.stringify(e));switch(t.type){case u.a.ACTION.UPDATE:var r=["showSettings"];r.forEach((function(e){void 0!==t[e]&&(n[e]=t[e])}));break;case u.d.ACTION.SET_VOICES:n.player.voices=t.value;break;case u.c.ACTION.SET_SECTIONS:n.player.sections=t.value;break;case u.d.ACTION.UPDATE:var a=["currentSection","status","playingTabId"];a.forEach((function(e){void 0!==t[e]&&(n.player[e]=t[e])}));break;case u.d.ACTION.CURRENT_SECTION:n.player.currentSection=t.value;break;case u.d.ACTION.LOADING:n.player.status=u.d.STATUS.IS_LOADING;break;case u.d.ACTION.ERROR:n.player.status=u.d.STATUS.IS_ERROR;break;case u.d.ACTION.TAB_ID:n.player.playingTabId=t.tabId;break;case u.b.ACTION.SKIP_ANIMATE:n.skipAnimate=t.value;break;case u.e.ACTION.UPDATE:var c=["voice","volume","pitch","rate"];c.forEach((function(e){void 0!==t[e]&&(n.player.settings[e]=t[e])}));break;case u.e.ACTION.OTHER_UPDATE:var s=["autoscroll","highlightColor","disableHotkeys"];s.forEach((function(e){void 0!==t[e]&&(n[e]=t[e])}));break;case u.e.ACTION.HOTKEY_FOCUS:n.hotkeyFocus=t.hotkeyFocus;break;case u.e.ACTION.SET_HOTKEYS:n.hotkeys[t.key]=t.hotkeys}return n};n.d(t,"b",(function(){return p}));var p=Object(r.a)(),f=Object(s.b)(i,Object(s.a)(p,a.a));Object(c.wrapStore)(f);t.a=f},63:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return o}));var r=n(0),a=n.n(r),c=n(2),s=chrome||browser,u=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(a.a.mark((function e(r,u){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.tabs.query({currentWindow:!0,active:!0},function(){var e=Object(c.a)(a.a.mark((function e(o){var i,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=o[0])&&i.id?((p={}).message=t,void 0!==n&&(p.params=n),s.tabs.sendMessage(i.id,p,function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({tabId:i.id,response:t||!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):u({error:"no active tab",response:!1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.tabs.query({currentWindow:!0,active:!0},function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n[0],t(r.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},83:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(28),a=(chrome||browser,function(e){if(r.e)return!1;try{var t=new XMLHttpRequest,n="";n=e?"v=1&tid="+r.b+"&cid= "+r.a+"&aip=1&ds=add-on&t=event&ec="+e.category+"&ea="+e.action+"&el="+e.label:"v=1&tid="+r.b+"&cid= "+r.a+"&aip=1&dp=%2Fpopup&ds=add-on&t=pageview",t.open("POST","https://www.google-analytics.com/collect",!0),t.send(n)}catch(e){}});function c(){var t;try{t=e.chrome||e.browser||browser}catch(e){t=browser}if(!t)throw new Error("Browser API is not present");return t}}).call(this,n(80))}});